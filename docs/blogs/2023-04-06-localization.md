---
title: 前端多语言本地化项目的记录
---

- 前期规划
- 注意项
- 流程的制定
- 集成与自动化

## 前期规划

首先需要确定需要支持的语言和地区，对具体要翻译语言的工作量有个大概的估计，然后进行技术的选型，选择合适的框架和多语言的插件。

我们的项目是 Vue 框架，所以选择 `vue-i18n-next` 作为多语言的插件，使用 `JSON` 文件作为翻译内容的格式和存储方式，如果想使用其他格式如 `YAML` 或者自动导入功能，可以查看 `@intlify/unplugin-vue-i18n` 插件。

制定一个友好的多语言文件结构，常见的有多语言目录下的内容文件和内容文件中使用多语言的 KEY。

第一种:

```bash
├─locales
│  ├─en
│  │     index.js
│  │     home.js
|  ├─zh-CN
│  │     index.js
│  │     home.js
|  ├─jp
│  │     index.js
│  │     home.js
```

第二种：

```bash
├─locales
|  ├─index.js
|  ├─home.js
```

```json
// index.js
{
  "en": {},
  "zh-CN": {},
  "jp": {}
}
```

然后需要确定如何规避命名冲突问题，使用哪种 namespace 来隔离本地化的 Key，因为这里存在几个问题

1. 同一个词可能存在多种含义
2. 不同的文件可能出现同名的 Key
3. 含义不清晰，无法明确的给内容建立 Key

我们的方案是使用文件的划分来隔离命名空间，通过增加命名的关系来解决冲突，对于比较难命名的 Key，使用 hash 后的内容作为 Key。使用扁平化的 JSON 结构来避免嵌套带来的维护成本和复杂度。

```json
{
  "home.banner.text": "这样命名来减少嵌套",
  "home:banner:text": "也可以使用其他分隔符"
}
```

## 注意项

确定源语言，源语言作为其他语言的范本。翻译时，对语言文件中所有的 key，按照源语言的内容进行翻译，一般来说会以英文为主，因为英文做 key 更符合命名习惯。

有些内容可能会有特殊的语法，比如英文会有复数形式，`vue-i18n-next` 支持复数语法，使用 `dog | dogs` 来定义内容。

有些插值的情况，最好明确插值意义，比如 "{0} is requried"，不如 "{fields} is required" 更容易理解和维护。

文本内如果需要使用 i18n 内的转移字符，可以使用在符号外加上引号和括号 `({'!@#$%^&*'})`
